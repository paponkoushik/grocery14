{% extends 'partials/variables.html.twig' %}

{% set left_content = page.header %}
{% set bottom_left_image = page.media[left_content.pricing_left_image] %}
{% block render_block %}

    {#  {% cache 'pricing-' ~ grav.language.getActive %} #}

     {% set product_pricing = website_manager_api.getProductPricing %}


{#    {% set product_pricing = {#}
{#        "data": {#}
{#            "products": [#}
{#                {#}
{#                    "package_name": "Starter Pack",#}
{#                    "pricing_plan": {#}
{#                    "subscription_price": 9,#}
{#                    "currency": "USD",#}
{#                    "subscription_interval_days": 14,#}
{#                    "subscription_trial_days": 4,#}
{#                    "price": 5.99#}
{#                },#}
{#                    "all_benefits": [#}
{#                    "24/7 Customer Support",#}
{#                    "Unlimited Data Usage",#}
{#                    "Access to Premium Features",#}
{#                    "Priority Technical Assistance"#}

{#                ],#}
{#                    "purchase_url": "https://join.carrerovl.com/en/c/Vlaskie_limited_signup?product_id=PROD61QIG"#}
{#                },#}

{#                {#}
{#                    "package_name": "Pro Plus",#}
{#                    "pricing_plan": {#}
{#                    "subscription_price": 7,#}
{#                    "currency": "USD",#}
{#                    "subscription_interval_days": 14,#}
{#                    "subscription_trial_days": 2,#}
{#                    "price": 1.59#}
{#                },#}
{#                    "all_benefits": [#}
{#                    "Standard Customer Support",#}
{#                    "Limited Data Usage",#}
{#                    "Access to Basic Features",#}
{#                    "Technical Assistance"#}
{#                ],#}
{#                    "purchase_url": "https://join.carrerovl.com/en/c/Vlaskie_limited_signup?product_id=PROD61QIG"#}
{#                },#}
{#            ]#}
{#        }#}
{#    } %}#}



    <div class="pricings" id="modular_pricing">
        <div class="container top">
            <h3 class="block-title">{{ page.title|striptags('<span>')|raw  }}</h3>
            {{ page.content|raw }}
            {# <div class="pricing-sub-title">
                <h5>{{ page.header.sub_title.translatable }}</h5>

                <div class="avatar-row">
                    {% for i in 1..6 %}
                        <div class="avatar-wrapper">
                            <img src="{{ url('theme://images/pricing/i' ~ i ~ '.svg') }}" alt="Avatar {{ i }}" />
                        </div>
                    {% endfor %}
                </div>
            </div> #}
            
        </div>
        <div class="container pricing_body">
        {# {{dd(product_pricing.data.products)}} #}
            {% if product_pricing.data.products != null and (count(product_pricing.data.products) < 3) %}
                <div class="pricing_left">
                    <div class="pricing_left_top">
                        <h3>{{ page.find('/home').header.pricing.left_title.translatable }}</h3>
                        <a class="button" href="/{{ grav.language.getActive }}/contact">
                            {{ page.find('/home').header.pricing.left_button_text.translatable }}
                        </a>
                    </div>
                    <img class="" src="{{ url('theme://images/pricing.webp') }}" alt="Pricing Image"/>
                </div>
            {% endif %}
            <div class=" pricings-container">            
                {% if config.data.source == 'WSM' %}
                    {% include 'partials/product_pricing/pricing_wsm.html.twig' with {products: product_pricing.data } %}
                {% else %}
                    {% include 'partials/product_pricing/pricing_crm.html.twig' with {products: product_pricing.data.products } %}
                {% endif %}
            </div>
        </div>
    </div>
    {#  {% endcache %} #}
{% endblock %}


